<div class="dashboard-container">
  <h2>ðŸ“Š Tableau de bord</h2>
  <div class="cards">
    <div class="card" *ngFor="let s of visibleSections">
      <div class="card-title">
        {{ s.title }}
        <span class="count">{{ s.count || 0 }}</span>
      </div>
      <div class="card-actions">
        <a [routerLink]="s.route" [queryParams]="s.queryParams">â†’ AccÃ©der</a>
        <button class="chart-btn" (click)="showChart(s); $event.stopPropagation()" title="Afficher le graphique">
          ðŸ“ˆ
        </button>
      </div>
    </div>
  </div>
</div>

<div id="dboard_graphiques">
   <!-- div pour afficher les graphiques -->
   <div class="charts-section" *ngIf="selectedSection">
     <div class="chart-display">
       <div class="chart-header">
         <h3>ðŸ“Š Ã‰volution - {{ selectedSection.title }}</h3>
         <button class="close-btn" (click)="closeChart()">âœ•</button>
       </div>
       <div class="chart-content">
         <p class="chart-info">Graphique temporel pour: <strong>{{ selectedSection.title }}</strong></p>
         <p class="chart-info">Nombre actuel: <strong>{{ selectedSection.count || 0 }}</strong></p>
         
         <!-- Affichage des donnÃ©es du graphique -->
         <div *ngIf="chartData" class="chart-data">
           <div class="chart-stats">
             <div class="stat-item">
               <span class="stat-label">Total:</span>
               <span class="stat-value">{{ chartData.currentTotal }}</span>
             </div>
             <div class="stat-item">
               <span class="stat-label">Nombre de jours:</span>
               <span class="stat-value">{{ chartData.totalDays }}</span>
             </div>
           </div>
           
           <div class="chart-visualization">
             <h4>Ã‰volution cumulative</h4>
             <div class="chart-timeline">
               <div class="timeline-item" *ngFor="let label of chartData.labels; let i = index">
                 <div class="timeline-date">{{ label }}</div>
                 <div class="timeline-bar">
                   <div class="bar-daily" 
                        [style.height.px]="chartData.dailyCount[i] * 3"
                        [title]="'Ajouts: ' + chartData.dailyCount[i]">
                   </div>
                   <div class="bar-label">{{ chartData.dailyCount[i] }}</div>
                 </div>
                 <div class="timeline-cumul">Total: {{ chartData.cumulativeCount[i] }}</div>
               </div>
             </div>
           </div>
         </div>
         
         <div *ngIf="!chartData || chartData.totalDays === 0" class="placeholder-chart">
           <p>ðŸ“ˆ Aucune donnÃ©e disponible</p>
           <p>Pas encore de donnÃ©es avec createdDate pour {{ selectedSection.title }}</p>
         </div>
       </div>
     </div>
   </div>
 </div>
